[912. Sort an Array](https://leetcode.com/problems/sort-an-array/)

## what is [quicksort](https://en.wikipedia.org/wiki/Quicksort)

- Quicksort is an improvement on [bubble sort](https://en.wikipedia.org/wiki/Bubble_sort)

- 快速排序是二叉查找树（二叉搜索树）的一个空间最优化版本

- 快速排序就是个二叉树的前序遍历，归并排序就是个二叉树的后续遍历

1. 选一个基准数，通常为数组第一个 `pivot = nums[0]`
2. 选取第一个数和最后一个数，设置头部哨兵 left 和尾部哨兵 right
3. 先从后边开始，自后向前扫描 `right--`，尾部的哨兵如发现有 **比基准数小** 的数，和 `left` 交换
4. 再从前边开始，自前向后扫描 `left++`，头部的哨兵如发现有 **比基准数大** 的数，和 `right` 交换 

PS: 以上操作也可以联想成挖出一个坑，然后按照 3 和 4 的规则去填坑，最后当哨兵相遇时，把最开始挖出来的基准填入

重复 3 和 4，直到两个哨兵相遇，交换基准数和尾哨兵

此时一开始选中的 `pivot` 已经归位，递归地对 pivot 左右两侧子序列进行排序

Other Approachs: Less code, the tradeoff in the code is it uses a bit of extra space. https://leetcode.com/problems/sort-an-array/discuss/277127/7-line-quicksort-to-write-in-interviews-(Python)

## ans

Naive Quick Sort: best O(nlogn), avg O(nlogn), worst O(n^2). 3-way Radix Quicksort Time Complexity: best O(n), avg O(nlogn), worst O(2^K * N).

```python
import random
from typing import List


class Solution:
    def sortArray(self, nums: List[int]) -> List[int]:
        self.quickSort(nums, 0, len(nums) - 1)
        return nums

    def quickSort(self, nums, l, r):
        if l >= r:
            return
        random_index = random.randint(l, r)
        pivot = nums[random_index]
        nums[l], nums[random_index] = nums[random_index], nums[l]
        i = l + 1  # current operation
        j = l  # first smaller to pivot, swapped, left to right
        k = r + 1  # first larger than pivot, swapped, right to left

        while i < k:
            # find num < pivot, swap with leftmost(hasn't been swapped yet)
            if nums[i] < pivot:
                nums[i], nums[j + 1] = nums[j + 1], nums[i]
                j += 1
                i += 1
            # find num > pivot, swap with rightmost(hasn't been swapped yet)
            elif nums[i] > pivot:
                nums[i], nums[k - 1] = nums[k - 1], nums[i]
                k -= 1
            # if num = pivot, skip
            else:
                i += 1
        nums[l], nums[j] = nums[j], nums[l]
        self.quickSort(nums, l, j - 1)
        self.quickSort(nums, k, r)


nums = [2, 8, 7, 1, 3, 5, 6, 4, 5, 5, 6, 4]

s = Solution()
print(s.sortArray(nums))
```